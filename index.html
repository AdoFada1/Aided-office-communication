<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AISEB Office Communication System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #1e293b;
            --light: #f8fafc;
            --gray: #94a3b8;
            --card-bg: #ffffff;
            --border: #e2e8f0;
            --dpm-color: #8b5cf6;
            --hod-color: #0ea5e9;
            --executive-color: #f97316;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            color: #334155;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 1200px;
        }

        .login-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 30px;
            width: 400px;
            margin: 0 auto;
        }

        .app-container {
            display: none;
        }

        header {
            background: var(--dark);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 24px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo i {
            font-size: 28px;
            color: var(--secondary);
        }

        .logo h1 {
            font-size: 24px;
            font-weight: 700;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .role-badge {
            background: var(--secondary);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 1fr 3fr;
            gap: 24px;
        }

        .sidebar {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            height: fit-content;
        }

        .user-profile {
            text-align: center;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
            margin-bottom: 20px;
        }

        .avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            margin: 0 auto 12px;
        }

        .avatar.admin {
            background: var(--executive-color);
        }

        .avatar.hod {
            background: var(--hod-color);
        }

        .avatar.dpm {
            background: var(--dpm-color);
        }

        .avatar.staff {
            background: var(--primary);
        }

        .user-profile h2 {
            font-size: 18px;
            margin-bottom: 4px;
        }

        .user-profile p {
            color: var(--gray);
            font-size: 14px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-item:hover {
            background: #f1f5f9;
        }

        .nav-item.active {
            background: var(--primary);
            color: white;
        }

        .nav-item i {
            width: 20px;
            text-align: center;
        }

        .main-content {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .section-title {
            font-size: 22px;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--border);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }

        .stat-card {
            background: var(--light);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .stat-card h3 {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 8px;
        }

        .stat-card .value {
            font-size: 28px;
            font-weight: 700;
            color: var(--primary);
        }

        .activity-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .activity-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--light);
            border-radius: 8px;
        }

        .activity-item i {
            color: var(--primary);
            font-size: 18px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 16px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 16px;
        }

        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-secondary {
            background: var(--secondary);
            color: white;
        }

        .btn-warning {
            background: var(--warning);
            color: black;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 14px;
        }

        .submission-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .submission-item {
            background: var(--light);
            padding: 16px;
            border-radius: 8px;
            border-left: 4px solid var(--primary);
        }

        .submission-item h3 {
            margin-bottom: 8px;
        }

        .submission-meta {
            display: flex;
            gap: 16px;
            color: var(--gray);
            font-size: 14px;
            margin-bottom: 12px;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-pending {
            background: #fef3c7;
            color: #92400e;
        }

        .status-forwarded {
            background: #bfdbfe;
            color: #1e40af;
        }
        
        .status-hod-approved {
            background: #ddd6fe;
            color: #5b21b6;
        }

        .status-approved {
            background: #d1fae5;
            color: #065f46;
        }

        .status-rejected {
            background: #fee2e2;
            color: #b91c1c;
        }

        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 12px;
        }

        .file-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 16px;
        }

        .file-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: var(--light);
            border-radius: 8px;
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .file-actions {
            display: flex;
            gap: 8px;
        }

        .admin-controls {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }

        .user-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 16px;
        }

        .user-table th,
        .user-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .user-table th {
            background: var(--light);
            font-weight: 600;
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            color: var(--gray);
            font-size: 14px;
        }

        .role-permission {
            background: var(--light);
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 16px;
        }

        .role-permission h3 {
            margin-bottom: 8px;
            color: var(--primary);
        }

        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-header h2 {
            font-size: 24px;
            color: var(--dark);
            margin-bottom: 10px;
        }

        .login-header p {
            color: var(--gray);
        }

        .demo-accounts {
            background: var(--light);
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 14px;
        }

        .demo-accounts h4 {
            margin-bottom: 10px;
            color: var(--dark);
        }

        .demo-account {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px dashed var(--border);
        }

        .chat-container {
            display: flex;
            flex-direction: column;
            height: 400px;
            background: var(--light);
            border-radius: 12px;
            overflow: hidden;
        }

        .chat-header {
            padding: 16px;
            background: var(--primary);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-messages {
            flex: 1;
            padding: 16px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .message {
            max-width: 80%;
            padding: 12px;
            border-radius: 12px;
        }

        .message.received {
            background: white;
            align-self: flex-start;
        }

        .message.sent {
            background: var(--primary);
            color: white;
            align-self: flex-end;
        }

        .chat-input {
            display: flex;
            padding: 16px;
            gap: 12px;
            background: white;
            border-top: 1px solid var(--border);
        }

        .chat-input input {
            flex: 1;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 20px;
        }

        @media (max-width: 1100px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .login-container {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Login Form -->
        <div class="login-container" id="loginView">
            <div class="login-header">
                <h2>AISEC Office Communication System</h2>
                <p>Sign in to access your dashboard</p>
            </div>
            
            <div class="form-group">
                <label for="loginEmail">Email Address</label>
                <input type="email" class="form-control" id="loginEmail" placeholder="Enter your email">
            </div>
            
            <div class="form-group">
                <label for="loginPassword">Password</label>
                <input type="password" class="form-control" id="loginPassword" placeholder="Enter your password">
            </div>
            
            <button class="btn btn-primary" id="loginBtn" style="width: 100%;">Sign In</button>
            
            <div class="demo-accounts">
                <h4>Demo Accounts:</h4>
                <div class="demo-account">
                    <span>Executive: <strong>executive@aiseb.org</strong></span>
                    <span>Password: <strong>admin123</strong></span>
                </div>
                <div class="demo-account">
                    <span>DPM: <strong>dpm@aiseb.org</strong></span>
                    <span>Password: <strong>dpm123</strong></span>
                </div>
                <div class="demo-account">
                    <span>HOD: <strong>hod@aiseb.org</strong></span>
                    <span>Password: <strong>hod123</strong></span>
                </div>
                <div class="demo-account">
                    <span>Staff: <strong>staff@aiseb.org</strong></span>
                    <span>Password: <strong>staff123</strong></span>
                </div>
            </div>
        </div>
        
        <!-- Main Application (initially hidden) -->
        <div class="app-container" id="appView">
            <header>
                <div class="logo">
                    <i class="fas fa-building"></i>
                    <h1>AISEB Office Communication System</h1>
                </div>
                <div class="user-info">
                    <div class="role-badge" id="userRole">Executive Secretary</div>
                    <div id="userName">Executive Secretary</div>
                    <button class="btn btn-sm" id="logoutBtn" style="background: var(--danger); color: white;">Logout</button>
                </div>
            </header>

            <div class="dashboard">
                <div class="sidebar">
                    <div class="user-profile">
                        <div class="avatar" id="userAvatar">
                            <i class="fas fa-user-shield"></i>
                        </div>
                        <h2 id="profileName">Executive Secretary</h2>
                        <p id="profileDept">Administration</p>
                    </div>

                    <div class="nav-item active" data-tab="dashboard">
                        <i class="fas fa-th-large"></i>
                        <span>Dashboard</span>
                    </div>
                    <div class="nav-item" data-tab="submissions">
                        <i class="fas fa-paper-plane"></i>
                        <span>Submissions</span>
                    </div>
                    <div class="nav-item" data-tab="approvals">
                        <i class="fas fa-check-circle"></i>
                        <span>Approvals</span>
                    </div>
                    <div class="nav-item" data-tab="chat">
                        <i class="fas fa-comments"></i>
                        <span>Chat</span>
                    </div>
                    <div class="nav-item dpm-only">
                        <i class="fas fa-user-plus"></i>
                        <span>Register Staff</span>
                    </div>
                    <div class="nav-item admin-only">
                        <i class="fas fa-users"></i>
                        <span>User Management</span>
                    </div>

                    <div class="role-permission">
                        <h3 id="roleTitle">Executive Privileges</h3>
                        <p id="roleDescription">Final approval authority for all requests</p>
                    </div>
                </div>

                <div class="main-content">
                    <div class="tab-content active" id="dashboard">
                        <h2 class="section-title">Dashboard</h2>
                        
                        <div class="stats-grid">
                            <div class="stat-card">
                                <h3>Pending Approvals</h3>
                                <div class="value">7</div>
                            </div>
                            <div class="stat-card">
                                <h3>Department Staff</h3>
                                <div class="value">24</div>
                            </div>
                            <div class="stat-card">
                                <h3>My Submissions</h3>
                                <div class="value">5</div>
                            </div>
                        </div>

                        <h3>Recent Activity</h3>
                        <div class="activity-list">
                            <div class="activity-item">
                                <i class="fas fa-file-alt"></i>
                                <div>
                                    <p><strong>IT Department</strong> submitted a software request</p>
                                    <small>10 minutes ago</small>
                                </div>
                            </div>
                            <div class="activity-item">
                                <i class="fas fa-check-circle"></i>
                                <div>
                                    <p>You approved <strong>Budget Request #2023-0087</strong></p>
                                    <small>45 minutes ago</small>
                                </div>
                            </div>
                            <div class="activity-item">
                                <i class="fas fa-forward"></i>
                                <div>
                                    <p><strong>Finance HOD</strong> forwarded a budget request</p>
                                    <small>1 hour ago</small>
                                </div>
                            </div>
                            <div class="activity-item">
                                <i class="fas fa-user-plus"></i>
                                <div>
                                    <p><strong>DPM</strong> registered 2 new staff members</p>
                                    <small>2 hours ago</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="tab-content" id="submissions">
                        <h2 class="section-title">New Submission</h2>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="department">Department</label>
                                <select class="form-control" id="department">
                                    <option>IT</option>
                                    <option>Finance</option>
                                    <option>Operations</option>
                                    <option>Marketing</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="subject">Subject</label>
                                <input type="text" class="form-control" id="subject" placeholder="Enter subject">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="message">Message</label>
                            <textarea class="form-control" id="message" placeholder="Write your message..."></textarea>
                        </div>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="attachment">Attachment</label>
                                <input type="file" class="form-control" id="attachment">
                            </div>
                            <div class="form-group">
                                <label>Signature</label>
                                <div id="signature-pad" style="border: 1px dashed #ccc; height: 100px; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: var(--gray);">
                                    <i class="fas fa-signature"></i> Click to draw your signature
                                </div>
                                <button id="clear-signature" class="btn" style="margin-top: 8px; background: var(--gray); color: white; padding: 8px 12px;">Clear Signature</button>
                            </div>
                        </div>
                        
                        <button class="btn btn-primary" id="submit-btn">Submit to HOD</button>

                        <h2 class="section-title" style="margin-top: 32px;">My Submissions</h2>
                        <div class="submission-list" id="my-submissions">
                            <div class="submission-item">
                                <h3>Budget Approval for Q4 2023</h3>
                                <div class="submission-meta">
                                    <span>Finance Department</span>
                                    <span>Yesterday</span>
                                    <span>To: Finance HOD</span>
                                </div>
                                <p>Requesting approval for the proposed budget for the last quarter of 2023.</p>
                                <div>
                                    <span class="status-badge status-approved">Approved</span>
                                </div>
                            </div>
                            <div class="submission-item">
                                <h3>Software License Request</h3>
                                <div class="submission-meta">
                                    <span>IT Department</span>
                                    <span>2 days ago</span>
                                    <span>To: IT HOD</span>
                                </div>
                                <p>Request for new software licenses for the development team.</p>
                                <div>
                                    <span class="status-badge status-forwarded">Forwarded to Executive</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="tab-content" id="approvals">
                        <h2 class="section-title">Approval Queue</h2>
                        <p id="approvalDescription">Final approval authority: Executive Secretary only</p>
                        
                        <div class="submission-list" id="approval-list">
                            <div class="submission-item">
                                <h3>Software License Renewal</h3>
                                <div class="submission-meta">
                                    <span>IT Department</span>
                                    <span>Submitted by: David Wilson (IT HOD)</span>
                                    <span>Today</span>
                                </div>
                                <p>Renewal request for Microsoft Office and Adobe Creative Cloud licenses.</p>
                                <div class="file-list">
                                    <div class="file-item">
                                        <div class="file-info">
                                            <i class="fas fa-file-pdf" style="color: #e74c3c;"></i>
                                            <span>Software_Quote.pdf</span>
                                        </div>
                                        <div class="file-actions">
                                            <button class="btn btn-primary btn-sm"><i class="fas fa-download"></i> Download</button>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <span class="status-badge status-hod-approved">HOD Approved - Waiting Final Approval</span>
                                </div>
                                <div class="action-buttons">
                                    <button class="btn btn-primary"><i class="fas fa-check"></i> Approve</button>
                                    <button class="btn btn-danger"><i class="fas fa-times"></i> Reject</button>
                                    <button class="btn btn-warning"><i class="fas fa-comment"></i> Request Changes</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="tab-content" id="chat">
                        <h2 class="section-title">Department Chat</h2>
                        <p>Chat with Executive Secretary and other department members</p>
                        
                        <div class="chat-container">
                            <div class="chat-header">
                                <span>Executive Secretary Channel</span>
                                <span id="onlineCount">3 online</span>
                            </div>
                            <div class="chat-messages" id="chat-messages">
                                <div class="message received">
                                    <strong>Executive Secretary:</strong> Welcome to the executive channel. How can I assist you today?
                                </div>
                                <div class="message received">
                                    <strong>Finance HOD:</strong> I have forwarded the budget report for approval.
                                </div>
                                <div class="message sent">
                                    <strong>You:</strong> I'll review it by end of day.
                                </div>
                            </div>
                            <div class="chat-input">
                                <input type="text" id="chat-input" placeholder="Type a message...">
                                <button class="btn btn-primary" id="send-chat">Send</button>
                            </div>
                        </div>
                    </div>

                    <div class="tab-content" id="register">
                        <h2 class="section-title">Register New Staff</h2>
                        <p>DPM can register new staff members to their departments</p>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="reg-name">Full Name</label>
                                <input type="text" class="form-control" id="reg-name" placeholder="Enter full name">
                            </div>
                            <div class="form-group">
                                <label for="reg-email">Email</label>
                                <input type="email" class="form-control" id="reg-email" placeholder="Enter email address">
                            </div>
                        </div>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="reg-password">Password</label>
                                <input type="password" class="form-control" id="reg-password" placeholder="Create password">
                            </div>
                            <div class="form-group">
                                <label for="reg-department">Department</label>
                                <select class="form-control" id="reg-department">
                                    <option>IT</option>
                                    <option>Finance</option>
                                    <option>Operations</option>
                                    <option>Marketing</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="reg-role">Role</label>
                            <select class="form-control" id="reg-role">
                                <option value="staff">Staff</option>
                            </select>
                        </div>
                        
                        <button class="btn btn-primary"><i class="fas fa-user-plus"></i> Register Staff</button>
                    </div>
                </div>
            </div>

            <div class="footer">
                <p>Â© 2023 AISEB Office Communication System</p>
            </div>
        </div>
    </div>

    <script>
        // User database simulation
        const users = {
            'executive@aiseb.org': {
                password: 'admin123',
                name: 'Executive Secretary',
                department: 'Administration',
                role: 'executive',
                permissions: ['final_approval', 'view_all', 'chat_all']
            },
            'dpm@aiseb.org': {
                password: 'dpm123',
                name: 'Department Manager',
                department: 'Management',
                role: 'dpm',
                permissions: ['register_staff', 'view_department', 'chat_hod']
            },
            'hod@aiseb.org': {
                password: 'hod123',
                name: 'IT HOD',
                department: 'IT',
                role: 'hod',
                permissions: ['review_submissions', 'forward_approvals', 'view_department', 'chat_executive']
            },
            'staff@aiseb.org': {
                password: 'staff123',
                name: 'John Doe',
                department: 'IT',
                role: 'staff',
                permissions: ['submit_requests']
            }
        };

        // DOM Elements
        const loginView = document.getElementById('loginView');
        const appView = document.getElementById('appView');
        const loginBtn = document.getElementById('loginBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const userRole = document.getElementById('userRole');
        const userName = document.getElementById('userName');
        const profileName = document.getElementById('profileName');
        const profileDept = document.getElementById('profileDept');
        const userAvatar = document.getElementById('userAvatar');
        const roleTitle = document.getElementById('roleTitle');
        const roleDescription = document.getElementById('roleDescription');
        const approvalDescription = document.getElementById('approvalDescription');
        
        // Current user
        let currentUser = null;

        // Login functionality
        loginBtn.addEventListener('click', () => {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (users[email] && users[email].password === password) {
                currentUser = users[email];
                showAppView();
            } else {
                alert('Invalid email or password. Please try again.');
            }
        });

        // Logout functionality
        logoutBtn.addEventListener('click', () => {
            currentUser = null;
            showLoginView();
        });

        // Show appropriate view based on login status
        function showAppView() {
            loginView.style.display = 'none';
            appView.style.display = 'block';
            
            // Update UI based on user role
            updateUIForUser();
        }

        function showLoginView() {
            loginView.style.display = 'block';
            appView.style.display = 'none';
            
            // Clear login form
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';
        }

        // Update UI based on user role
        function updateUIForUser() {
            if (!currentUser) return;
            
            // Update user info
            userRole.textContent = currentUser.role === 'executive' ? 'Executive Secretary' : 
                                 currentUser.role === 'dpm' ? 'Department Manager' : 
                                 currentUser.role === 'hod' ? 'Head of Department' : 'Staff';
            userName.textContent = currentUser.name;
            profileName.textContent = currentUser.name;
            profileDept.textContent = currentUser.department;
            
            // Update avatar
            userAvatar.className = 'avatar';
            if (currentUser.role === 'executive') userAvatar.classList.add('admin');
            else if (currentUser.role === 'dpm') userAvatar.classList.add('dpm');
            else if (currentUser.role === 'hod') userAvatar.classList.add('hod');
            else userAvatar.classList.add('staff');
            
            // Update role description
            if (currentUser.role === 'executive') {
                roleTitle.textContent = 'Executive Privileges';
                roleDescription.textContent = 'Final approval authority for all requests';
                approvalDescription.textContent = 'Final approval authority: Executive Secretary only';
                
                // Show executive features
                document.querySelectorAll('.admin-only').forEach(el => {
                    el.style.display = 'flex';
                });
                document.querySelectorAll('.dpm-only').forEach(el => {
                    el.style.display = 'none';
                });
                
                // Update approval list for executive
                document.getElementById('approval-list').innerHTML = `
                    <div class="submission-item">
                        <h3>Software License Renewal</h3>
                        <div class="submission-meta">
                            <span>IT Department</span>
                            <span>Submitted by: David Wilson (IT HOD)</span>
                            <span>Today</span>
                        </div>
                        <p>Renewal request for Microsoft Office and Adobe Creative Cloud licenses.</p>
                        <div class="file-list">
                            <div class="file-item">
                                <div class="file-info">
                                    <i class="fas fa-file-pdf" style="color: #e74c3c;"></i>
                                    <span>Software_Quote.pdf</span>
                                </div>
                                <div class="file-actions">
                                    <button class="btn btn-primary btn-sm"><i class="fas fa-download"></i> Download</button>
                                </div>
                            </div>
                        </div>
                        <div>
                            <span class="status-badge status-hod-approved">HOD Approved - Waiting Final Approval</span>
                        </div>
                        <div class="action-buttons">
                            <button class="btn btn-primary"><i class="fas fa-check"></i> Approve</button>
                            <button class="btn btn-danger"><i class="fas fa-times"></i> Reject</button>
                            <button class="btn btn-warning"><i class="fas fa-comment"></i> Request Changes</button>
                        </div>
                    </div>
                `;
            } else if (currentUser.role === 'dpm') {
                roleTitle.textContent = 'DPM Privileges';
                roleDescription.textContent = 'Register new staff to departments and manage department records';
                approvalDescription.textContent = 'As DPM, you can register staff but not approve submissions';
                
                // Show DPM features
                document.querySelectorAll('.admin-only').forEach(el => {
                    el.style.display = 'none';
                });
                document.querySelectorAll('.dpm-only').forEach(el => {
                    el.style.display = 'flex';
                });
                
                // Update approval list for DPM
                document.getElementById('approval-list').innerHTML = `
                    <div class="activity-item">
                        <i class="fas fa-info-circle"></i>
                        <div>
                            <p>As a Department Manager, you don't have approval authority. Your role is to register new staff members.</p>
                        </div>
                    </div>
                `;
            } else if (currentUser.role === 'hod') {
                roleTitle.textContent = 'HOD Privileges';
                roleDescription.textContent = 'Review staff submissions and forward to Executive Secretary';
                approvalDescription.textContent = 'Review submissions from your department staff';
                
                // Hide features not for HOD
                document.querySelectorAll('.admin-only').forEach(el => {
                    el.style.display = 'none';
                });
                document.querySelectorAll('.dpm-only').forEach(el => {
                    el.style.display = 'none';
                });
                
                // Update approval list for HOD
                document.getElementById('approval-list').innerHTML = `
                    <div class="submission-item">
                        <h3>New Software Development Tool</h3>
                        <div class="submission-meta">
                            <span>IT Department</span>
                            <span>Submitted by: Sarah Smith (Staff)</span>
                            <span>Today</span>
                        </div>
                        <p>Request for new software development tool license for the engineering team.</p>
                        <div class="file-list">
                            <div class="file-item">
                                <div class="file-info">
                                    <i class="fas fa-file-pdf" style="color: #e74c3c;"></i>
                                    <span>Tool_Quote.pdf</span>
                                </div>
                                <div class="file-actions">
                                    <button class="btn btn-primary btn-sm"><i class="fas fa-download"></i> Download</button>
                                </div>
                            </div>
                        </div>
                        <div>
                            <span class="status-badge status-pending">Pending HOD Review</span>
                        </div>
                        <div class="action-buttons">
                            <button class="btn btn-primary"><i class="fas fa-check"></i> Approve & Forward</button>
                            <button class="btn btn-danger"><i class="fas fa-times"></i> Reject</button>
                            <button class="btn btn-warning"><i class="fas fa-comment"></i> Request Changes</button>
                        </div>
                    </div>
                `;
            } else {
                roleTitle.textContent = 'Staff Privileges';
                roleDescription.textContent = 'Submit requests to your Head of Department';
                approvalDescription.textContent = 'Your submissions will be reviewed by your HOD';
                
                // Hide features not for staff
                document.querySelectorAll('.admin-only').forEach(el => {
                    el.style.display = 'none';
                });
                document.querySelectorAll('.dpm-only').forEach(el => {
                    el.style.display = 'none';
                });
                
                // Update approval list for staff (empty as staff can't approve)
                document.getElementById('approval-list').innerHTML = `
                    <div class="activity-item">
                        <i class="fas fa-info-circle"></i>
                        <div>
                            <p>As a staff member, you don't have approval authority. Your submissions will be reviewed by your HOD.</p>
                        </div>
                    </div>
                `;
            }
            
            // Set up approval buttons
            setupApprovalButtons();
            
            // Set up chat
            setupChat();
        }

        // Set up approval button functionality
        function setupApprovalButtons() {
            document.querySelectorAll('.action-buttons .btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const item = this.closest('.submission-item');
                    const statusBadge = item.querySelector('.status-badge');
                    
                    if (this.textContent.includes('Approve')) {
                        if (currentUser.role === 'executive') {
                            statusBadge.textContent = 'Approved by Executive Secretary';
                            statusBadge.className = 'status-badge status-approved';
                            alert('Request approved! This has been logged in the system.');
                        } else if (currentUser.role === 'hod') {
                            statusBadge.textContent = 'Forwarded to Executive Secretary';
                            statusBadge.className = 'status-badge status-forwarded';
                            alert('Request forwarded to Executive Secretary for final approval.');
                        }
                    } else if (this.textContent.includes('Reject')) {
                        statusBadge.textContent = 'Rejected';
                        statusBadge.className = 'status-badge status-rejected';
                        alert('Request rejected! The submitter has been notified.');
                    }
                    
                    item.style.opacity = '0.7';
                });
            });
        }

        // Set up chat functionality
        function setupChat() {
            const chatInput = document.getElementById('chat-input');
            const chatMessages = document.getElementById('chat-messages');
            const sendChatBtn = document.getElementById('send-chat');

            sendChatBtn.addEventListener('click', () => {
                if (chatInput.value.trim() !== '') {
                    const messageDiv = document.createElement('div');
                    messageDiv.className = 'message sent';
                    messageDiv.innerHTML = `<strong>You:</strong> ${chatInput.value}`;
                    chatMessages.appendChild(messageDiv);
                    chatInput.value = '';
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    
                    // Simulate a reply after a short delay
                    setTimeout(() => {
                        let reply = '';
                        let sender = '';
                        
                        if (currentUser.role === 'executive') {
                            // HODs chatting with executive
                            const replies = [
                                "Thanks for the update!",
                                "I'll look into that.",
                                "Can you provide more details?",
                                "Let's discuss this in the meeting.",
                                "I agree with that approach."
                            ];
                            reply = replies[Math.floor(Math.random() * replies.length)];
                            sender = 'HOD';
                        } else {
                            // Executive chatting with HODs
                            const replies = [
                                "Please review the submitted documents.",
                                "I need this approved by tomorrow.",
                                "Can you check with your team?",
                                "Let me know if you need any clarification.",
                                "This has been forwarded to finance."
                            ];
                            reply = replies[Math.floor(Math.random() * replies.length)];
                            sender = 'Executive Secretary';
                        }
                        
                        const replyDiv = document.createElement('div');
                        replyDiv.className = 'message received';
                        replyDiv.innerHTML = `<strong>${sender}:</strong> ${reply}`;
                        chatMessages.appendChild(replyDiv);
                        chatMessages.scrollTop = chatMessages.scrollHeight;
                    }, 1000);
                }
            });

            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendChatBtn.click();
                }
            });
        }

        // Tab switching functionality
        document.querySelectorAll('.nav-item').forEach(item => {
            if (item.dataset.tab) {
                item.addEventListener('click', function() {
                    // Remove active class from all items
                    document.querySelectorAll('.nav-item').forEach(i => {
                        i.classList.remove('active');
                    });
                    
                    // Add active class to clicked item
                    this.classList.add('active');
                    
                    // Hide all tab contents
                    document.querySelectorAll('.tab-content').forEach(tab => {
                        tab.classList.remove('active');
                    });
                    
                    // Show the selected tab content
                    const tabId = this.dataset.tab;
                    document.getElementById(tabId).classList.add('active');
                });
            }
        });

        // Form submission simulation
        const submitBtn = document.getElementById('submit-btn');
        submitBtn.addEventListener('click', () => {
            const subject = document.getElementById('subject').value;
            const message = document.getElementById('message').value;
            const department = document.getElementById('department').value;
            
            if (subject && message) {
                alert(`Submission sent to ${department} HOD for review!`);
                document.getElementById('subject').value = '';
                document.getElementById('message').value = '';
                document.getElementById('attachment').value = '';
                
                // Add to my submissions
                const mySubmissions = document.getElementById('my-submissions');
                const newSubmission = document.createElement('div');
                newSubmission.className = 'submission-item';
                newSubmission.innerHTML = `
                    <h3>${subject}</h3>
                    <div class="submission-meta">
                        <span>${department} Department</span>
                        <span>Just now</span>
                        <span>To: ${department} HOD</span>
                    </div>
                    <p>${message}</p>
                    <div>
                        <span class="status-badge status-pending">Pending HOD Review</span>
                    </div>
                `;
                mySubmissions.prepend(newSubmission);
            } else {
                alert('Please fill in all required fields');
            }
        });

        // Initially show login view
        showLoginView();
    </script>
</body>
</html>
